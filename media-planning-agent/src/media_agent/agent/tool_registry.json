{
  "registry_metadata": {
    "version": "1.0.0",
    "last_updated": "2025-05-30",
    "description": "Complete Media Planning Agent Tool Registry - All Tools Migrated"
  },

  "tool_registry": {
    "workspace_tools": {
      "load_workspace": {
        "function_name": "load_workspace",
        "module_path": "media_agent.tools.workspace_tools",
        "category": "workspace",
        "priority": 1,
        "description": "Load and validate MediaPlanPy workspace configuration. Required before any media plan operations.",

        "triggers": {
          "user_intents": [
            "load workspace",
            "load my workspace",
            "start session",
            "initialize workspace"
          ],
          "prerequisites": []
        },

        "parameters": {
          "workspace_path": {
            "type": "string",
            "required": false,
            "description": "Path to workspace.json file. Uses environment variable or default locations if not provided.",
            "examples": ["./workspace.json", "C:/mediaplanpy/workspace_settings.json"]
          }
        },

        "success_criteria": {
          "returns": ["workspace_info", "config_summary"],
          "session_state": "workspace_manager_loaded",
          "enables_operations": ["list_mediaplans", "create_mediaplan_basic"]
        },

        "common_errors": {
          "file_not_found": "Workspace configuration file not found at specified path",
          "invalid_config": "Workspace configuration failed validation",
          "database_connection": "Database connection failed (non-critical)"
        }
      },

      "list_mediaplans": {
        "function_name": "list_mediaplans",
        "module_path": "media_agent.tools.workspace_tools",
        "category": "workspace",
        "priority": 2,
        "description": "List all media plans in workspace with detailed information and statistics.",

        "triggers": {
          "user_intents": [
            "list media plans",
            "show media plans",
            "what media plans do I have",
            "see existing plans",
            "1"
          ],
          "prerequisites": ["workspace_loaded"],
          "auto_call_after": ["delete_mediaplan"]
        },

        "parameters": {
          "include_stats": {
            "type": "boolean",
            "required": false,
            "default": true,
            "description": "Include line item counts and budget allocation statistics"
          },
          "limit": {
            "type": "integer",
            "required": false,
            "description": "Maximum number of media plans to return",
            "examples": [5, 10, 20]
          }
        },

        "success_criteria": {
          "returns": ["media_plans", "count"],
          "data_includes": [
            "media_plan_id",
            "campaign_name",
            "campaign_objective",
            "budget_total",
            "start_date",
            "end_date",
            "created_by",
            "created_at",
            "lineitem_count",
            "total_cost"
          ]
        },

        "display_requirements": {
          "show_individual_plans": true,
          "never_summarize": true,
          "always_include": ["media_plan_id", "exact_dates", "precise_budgets"],
          "format_structured": true
        }
      },

      "validate_mediaplan": {
        "function_name": "validate_mediaplan",
        "module_path": "media_agent.tools.workspace_tools",
        "category": "workspace",
        "priority": 3,
        "description": "Validate the current media plan against schema and business rules.",

        "triggers": {
          "user_intents": [
            "validate media plan",
            "validate plan",
            "check plan",
            "validate current plan"
          ],
          "prerequisites": ["workspace_loaded", "current_mediaplan_exists"]
        },

        "parameters": {},

        "success_criteria": {
          "returns": ["validation_errors", "is_valid"],
          "validation_types": ["schema_validation", "business_rules", "cross_field_validation"]
        }
      },

      "get_workspace_info": {
        "function_name": "get_workspace_info",
        "module_path": "media_agent.tools.workspace_tools",
        "category": "workspace",
        "priority": 4,
        "description": "Get detailed information about current workspace configuration and status.",

        "triggers": {
          "user_intents": [
            "workspace info",
            "show workspace details",
            "workspace configuration",
            "workspace status"
          ],
          "prerequisites": ["workspace_loaded"]
        },

        "parameters": {},

        "success_criteria": {
          "returns": ["workspace_details", "config"],
          "data_includes": ["storage_mode", "database_config", "schema_settings"]
        }
      },

      "list_campaigns": {
        "function_name": "list_campaigns",
        "module_path": "media_agent.tools.workspace_tools",
        "category": "workspace",
        "priority": 5,
        "description": "List all campaigns across media plans in workspace with statistics.",

        "triggers": {
          "user_intents": [
            "list campaigns",
            "show campaigns",
            "what campaigns do I have",
            "campaign overview"
          ],
          "prerequisites": ["workspace_loaded"]
        },

        "parameters": {
          "include_stats": {
            "type": "boolean",
            "required": false,
            "default": true,
            "description": "Include campaign statistics and metrics"
          },
          "limit": {
            "type": "integer",
            "required": false,
            "description": "Maximum number of campaigns to return"
          }
        },

        "success_criteria": {
          "returns": ["campaigns", "count"],
          "data_includes": ["campaign_info", "budget_stats", "performance_metrics"]
        }
      }
    },

    "mediaplan_tools": {
      "create_mediaplan_basic": {
        "function_name": "create_mediaplan_basic",
        "module_path": "media_agent.tools.mediaplan_tools",
        "category": "mediaplan",
        "priority": 1,
        "description": "Create new media plan foundation. Requires strategic consultation first.",

        "triggers": {
          "user_intents": [
            "create media plan",
            "new media plan",
            "create campaign",
            "start planning"
          ],
          "prerequisites": ["workspace_loaded", "strategic_consultation_completed"]
        },

        "consultation_required": {
          "strategic_questions": [
            "What are your primary business objectives for this campaign?",
            "Who is your target audience (demographics, interests, behaviors)?",
            "What is your total budget and any allocation preferences?",
            "When do you need the campaign to run (start and end dates)?",
            "Are there any channel preferences or constraints?",
            "How will you measure success (KPIs, success metrics)?"
          ],
          "budget_guidance": {
            "awareness": {"social": 30, "display": 25, "video": 25, "search": 15, "buffer": 5},
            "consideration": {"search": 35, "social": 30, "content": 20, "display": 15},
            "conversion": {"search": 40, "social_retargeting": 25, "email": 20, "display": 15},
            "retention": {"email": 40, "social": 25, "search": 20, "direct": 15}
          }
        },

        "parameters": {
          "campaign_name": {
            "type": "string",
            "required": true,
            "validation": "non_empty_string",
            "examples": ["Summer 2025 Launch", "Q4 Brand Awareness", "Product Launch Campaign"]
          },
          "campaign_objective": {
            "type": "string",
            "required": true,
            "enum": ["awareness", "consideration", "conversion", "retention", "loyalty", "other"],
            "examples": ["awareness", "conversion"]
          },
          "start_date": {
            "type": "string",
            "required": true,
            "format": "YYYY-MM-DD",
            "validation": "future_or_today"
          },
          "end_date": {
            "type": "string",
            "required": true,
            "format": "YYYY-MM-DD",
            "validation": "after_start_date"
          },
          "budget_total": {
            "type": "number",
            "required": true,
            "validation": "positive_number",
            "typical_ranges": [1000, 10000, 50000, 100000, 500000]
          },
          "created_by": {
            "type": "string",
            "required": true,
            "format": "email",
            "description": "Email address of plan creator"
          },
          "product_name": {
            "type": "string",
            "required": false,
            "description": "Product or service being advertised"
          },
          "product_description": {
            "type": "string",
            "required": false,
            "description": "Brief description of the product or service"
          },
          "target_audience_name": {
            "type": "string",
            "required": false,
            "description": "Name or description of target audience segment"
          }
        },

        "success_criteria": {
          "returns": ["campaign_info", "media_plan_id"],
          "session_state": "current_mediaplan_set",
          "enables_operations": ["create_lineitem", "save_mediaplan", "validate_mediaplan"]
        }
      },

      "save_mediaplan": {
        "function_name": "save_mediaplan",
        "module_path": "media_agent.tools.mediaplan_tools",
        "category": "mediaplan",
        "priority": 2,
        "description": "Save current media plan to workspace storage with optional strategic summary.",

        "triggers": {
          "user_intents": [
            "save media plan",
            "save plan",
            "save current plan",
            "save the plan"
          ],
          "prerequisites": ["workspace_loaded", "current_mediaplan_exists"]
        },

        "parameters": {
          "include_strategic_summary": {
            "type": "boolean",
            "required": false,
            "default": true,
            "description": "Whether to include strategic context in comments field"
          },
          "path": {
            "type": "string",
            "required": false,
            "description": "Optional custom path for saving (uses default if not provided)"
          },
          "overwrite": {
            "type": "boolean",
            "required": false,
            "default": true,
            "description": "Whether to overwrite existing files"
          }
        },

        "success_criteria": {
          "returns": ["save_info", "saved_path"],
          "file_formats": ["json", "parquet"],
          "database_sync": "if_enabled"
        }
      },

      "load_mediaplan": {
        "function_name": "load_mediaplan",
        "module_path": "media_agent.tools.mediaplan_tools",
        "category": "mediaplan",
        "priority": 3,
        "description": "Load existing media plan from workspace by ID or path.",

        "triggers": {
          "user_intents": [
            "load media plan",
            "load plan",
            "open media plan",
            "load plan [id]"
          ],
          "prerequisites": ["workspace_loaded"]
        },

        "parameters": {
          "media_plan_id": {
            "type": "string",
            "required": false,
            "description": "Unique identifier of media plan to load (preferred method)",
            "examples": ["mediaplan_abc123", "mediaplan_def456"]
          },
          "path": {
            "type": "string",
            "required": false,
            "description": "Path to media plan file (alternative to ID)"
          }
        },

        "success_criteria": {
          "returns": ["plan_info", "media_plan_loaded"],
          "session_state": "current_mediaplan_set",
          "enables_operations": ["create_lineitem", "save_mediaplan", "validate_mediaplan"]
        },

        "validation_rules": {
          "requires_id_or_path": true,
          "loads_into_session": true
        }
      },

      "delete_mediaplan": {
        "function_name": "delete_mediaplan",
        "module_path": "media_agent.tools.mediaplan_tools",
        "category": "mediaplan",
        "priority": 4,
        "description": "Delete media plan by ID. Requires explicit confirmation for safety.",

        "triggers": {
          "user_intents": [
            "delete media plan",
            "remove plan",
            "delete plan [id]",
            "remove [id]"
          ],
          "prerequisites": ["workspace_loaded"]
        },

        "parameters": {
          "media_plan_id": {
            "type": "string",
            "required": true,
            "description": "Unique identifier of media plan to delete",
            "examples": ["mediaplan_abc123", "mediaplan_def456"]
          },
          "confirm_deletion": {
            "type": "boolean",
            "required": true,
            "description": "Must be true to confirm deletion. Safety mechanism.",
            "safety_critical": true
          }
        },

        "safety_requirements": {
          "confirmation_required": true,
          "show_details_before_delete": true,
          "irreversible_operation": true
        },

        "success_criteria": {
          "returns": ["deletion_info", "deleted_files"],
          "triggers_follow_up": ["list_mediaplans"]
        }
      },

      "create_lineitem": {
        "function_name": "create_lineitem",
        "module_path": "media_agent.tools.mediaplan_tools",
        "category": "mediaplan",
        "priority": 5,
        "description": "Create one or more line items using MediaPlanPy batch support. Thin wrapper around enhanced SDK method with atomic operations and comprehensive validation.",

        "sdk_integration": {
          "sdk_method": "MediaPlan.create_lineitem",
          "validation_layer": "sdk",
          "error_handling": "sdk_passthrough",
          "atomic_operations": true,
          "schema_support": "full_mediaplanschema_v1.0.0"
        },

        "triggers": {
          "user_intents": [
            "create line item",
            "add line item",
            "create placement",
            "allocate budget",
            "add channel",
            "create multiple line items",
            "add all line items",
            "create line items based on allocation",
            "implement budget allocation"
          ],
          "prerequisites": ["current_mediaplan_exists"]
        },

        "parameters": {
          "line_items": {
            "type": "array",
            "required": true,
            "description": "Array of line item objects to create in batch. Each object supports ALL fields from mediaplanschema v1.0.0 specification. Validation handled by SDK.",
            "minItems": 1,
            "items": {
              "type": "object",
              "description": "Line item object supporting all mediaplanschema v1.0.0 fields. SDK handles validation, field validation, and business rules.",
              "required_fields": ["name", "start_date", "end_date", "cost_total"],
              "supported_fields": "All fields from mediaplanschema v1.0.0 lineitem specification",
              "examples": {
                "basic": {
                  "name": "Google Search Campaign",
                  "start_date": "2025-07-01",
                  "end_date": "2025-09-30",
                  "cost_total": 50000,
                  "channel": "search",
                  "vehicle": "Google Ads"
                },
                "advanced": {
                  "name": "Meta Video Campaign - NY Auto",
                  "start_date": "2025-07-01",
                  "end_date": "2025-09-30",
                  "cost_total": 75000,
                  "channel": "social",
                  "vehicle": "Facebook Ads",
                  "target_audience": "New York Car Buyers",
                  "cost_media": 70000,
                  "cost_platform": 5000,
                  "kpi": "cpv"
                }
              }
            }
          }
        },

        "budget_allocation_guidance": {
          "by_objective": {
            "awareness": {
              "social": {"recommended": 30},
              "video": {"recommended": 25},
              "display": {"recommended": 25},
              "search": {"recommended": 15},
              "buffer": {"recommended": 5}
            },
            "consideration": {
              "search": {"recommended": 35},
              "social": {"recommended": 30},
              "content": {"recommended": 20},
              "display": {"recommended": 15}
            },
            "conversion": {
              "search": {"recommended": 40},
              "social_retargeting": {"recommended": 25},
              "email": {"recommended": 20},
              "display": {"recommended": 15}
            }
          }
        },

        "agent_behavior": {
          "operation_type": "atomic_batch_only",
          "validation_approach": "defer_to_sdk",
          "error_handling": "surface_sdk_errors_with_context",
          "success_criteria": "all_items_created_or_none",
          "budget_validation": "sdk_handles_comprehensive_checking"
        },

        "success_criteria": {
          "returns": ["lineitems_created", "budget_summary", "created_count"],
          "updates_session": "current_mediaplan_lineitems",
          "budget_tracking": "sdk_calculated_remaining_budget",
          "error_recovery": "sdk_transaction_rollback"
        },

        "error_patterns": {
          "budget_exceeded": {
            "sdk_exception": "BudgetExceededError",
            "agent_response": "Suggest reducing costs or adjusting allocation",
            "auto_recovery": false
          },
          "validation_failed": {
            "sdk_exception": "ValidationError",
            "agent_response": "Explain specific field issues and requirements",
            "auto_recovery": true
          },
          "date_range_invalid": {
            "sdk_exception": "DateRangeError",
            "agent_response": "Check campaign period and date formats",
            "auto_recovery": true
          }
        },

        "performance_benefits": {
          "batch_operations": "Single API call instead of multiple sequential calls",
          "rate_limit_resistant": "Reduces API call frequency by up to 5x",
          "atomic_operations": "All-or-nothing creation prevents partial failures",
          "comprehensive_validation": "SDK handles all validation logic centrally"
        }
      }
    }
  },

  "categories": {
    "workspace": {
      "description": "Tools for workspace configuration and data exploration",
      "priority": 1
    },
    "mediaplan": {
      "description": "Tools for media plan creation, modification, and management",
      "priority": 2
    }
  }
}